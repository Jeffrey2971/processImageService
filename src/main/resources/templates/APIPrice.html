<!doctype html>
<html>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width initial-scale=1'>
    <script th:src="@{/layui/layui.js}"></script>
    <link th:href="@{/layui/css/layui.css}" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/price/style-head.css}">
    <link id="mode" rel="stylesheet" href="">
    <style>
        tr:hover{
            background-color: gray;
        }
        a{
            text-decoration: none;
        }

    </style>
    <script>
        layui.use(['jquery'], function () {
            var $ = layui.jquery

            $(function () {
                // 获取用户的主题偏好
                var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');

                // 定义一个回调函数，处理主题变化
                function handleThemeChange(event) {
                    if (event.matches) {
                        // 用户切换到深色主题
                        console.log('用户切换到深色主题');
                        // 切换到深色样式表
                        $("#mode").attr('href', '/watermark/css/price/style-dark.css')
                    } else {
                        // 用户切换到浅色主题
                        console.log('用户切换到浅色主题');
                        // 切换到浅色样式表
                        $("#mode").attr('href', '/watermark/css/price/style-light.css');
                    }
                }

                // 添加主题变化的监听器
                prefersDarkMode.addEventListener('change', handleThemeChange);

                // 初始时执行一次以处理当前主题
                handleThemeChange(prefersDarkMode);
            });
        });

    </script>
    <title>APIPrice</title>
</head>
<body class='typora-export typora-export-show-outline typora-export-collapse-outline'><div class='typora-export-content'>
    <div class="typora-export-sidebar"><div class="outline-content"><li class="outline-item-wrapper outline-h3 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#processimagecn-接入报价">Processimage.cn 接入报价</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h3 outline-item-open"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#按需购买">按需购买</a></div><ul class="outline-children"><li class="outline-item-wrapper outline-h4 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#①-套餐描述-1">① 套餐描述</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h4 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#②-套餐售价-1">② 套餐售价</a></div><ul class="outline-children"></ul></li></ul></li><li class="outline-item-wrapper outline-h3 outline-item-open"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#限期购买">限期购买</a></div><ul class="outline-children"><li class="outline-item-wrapper outline-h4 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#①-套餐描述-2">① 套餐描述</a></div><ul class="outline-children"></ul></li><li class="outline-item-wrapper outline-h4 outline-item-single"><div class="outline-item"><span class="outline-expander"></span><a class="outline-label" href="#②-套餐售价-2">② 套餐售价</a></div><ul class="outline-children"></ul></li></ul></li></div></div><div id='write'  class=''><h3 id='processimagecn-接入报价'><span>Processimage.cn 接入报价</span></h3><ul><li><span>套餐分为按需购买和限期购买，按需购买灵活性高、随时使用，限期购买价格实惠、限时使用</span></li></ul><h3 id='按需购买'><span>按需购买</span></h3><h4 id='①-套餐描述-1'><span>① 套餐描述</span></h4><ul><li><span>购买后</span><strong><span>长期可用</span></strong><span>，相对于限期购买可更灵活的使用，</span><strong><span>适用于不确定何时调用本服务的场景</span></strong></li></ul><h4 id='②-套餐售价-1'><span>② 套餐售价</span></h4><ul><li><p><span>服务包含识别出图片中的水印信息、水印位置、水印去除</span></p><figure><table><thead><tr><th><span>调用次数</span></th><th><span>价格</span></th><th><span>每次调用优惠后消费</span></th></tr></thead><tbody><tr id="watermark-process-01"><td><span>100</span></td><td><span>¥15</span></td><td><span>¥0.15</span></td></tr><tr id="watermark-process-02"><td><span>200</span></td><td><span>¥27.6</span></td><td><span>¥0.138</span></td></tr><tr id="watermark-process-03"><td><span>500</span></td><td><span>¥63.75</span></td><td><span>¥0.1275</span></td></tr><tr id="watermark-process-04"><td><span>1200</span></td><td><span>¥140.4</span></td><td><span>¥0.117</span></td></tr><tr id="watermark-process-05"><td><span>2500</span></td><td><span>¥287.5</span></td><td><span>¥0.115</span></td></tr><tr id="watermark-process-06"><td><span>5000</span></td><td><span>¥540</span></td><td><span>¥0.108</span></td></tr><tr id="watermark-process-07"><td><span>8000</span></td><td><span>¥864</span></td><td><span>¥0.108</span></td></tr><tr id="watermark-process-08"><td><span>10000</span></td><td><span>¥1050</span></td><td><span>¥0.105</span></td></tr></tbody></table></figure></li></ul><h3 id='限期购买'><span>限期购买</span></h3><h4 id='①-套餐描述-2'><span>① 套餐描述</span></h4><ul><li><span>购买后 30 天内有效，相对于按需购买价格更实惠，</span><strong><span>适用于短期内使用的场景</span></strong><span>。重复购买套餐将</span><strong><span>叠加日期及次数</span></strong><span>。例如：当前已购买了 100 次 12 ¥ 的套餐，此时套餐距离过期还剩 10 天，次数还剩 10 次，重复购买当前套餐后的效果为可调用次数为 110 次，过期时间剩余 40 天</span></li></ul><h4 id='②-套餐售价-2'><span>② 套餐售价</span></h4><ul><li><p><span>服务包含识别出图片中的水印信息、水印位置、水印去除</span></p><figure><table><thead><tr><th><span>调用次数</span></th><th><span>价格</span></th><th><span>平均每次调用消费</span></th></tr></thead><tbody><tr id="watermark-process-month-01"><td><span>100</span></td><td><span>¥12</span></td><td><span>¥0.12</span></td></tr><tr id="watermark-process-month-02"><td><span>200</span></td><td><span>¥22.8</span></td><td><span>¥0.114</span></td></tr><tr id="watermark-process-month-03"><td><span>500</span></td><td><span>¥54</span></td><td><span>¥0.108</span></td></tr><tr id="watermark-process-month-04"><td><span>1200</span></td><td><span>¥124.8</span></td><td><span>¥0.104</span></td></tr><tr id="watermark-process-month-05"><td><span>2500</span></td><td><span>¥250</span></td><td><span>¥0.1</span></td></tr><tr id="watermark-process-month-06"><td><span>5000</span></td><td><span>¥480</span></td><td><span>¥0.096</span></td></tr><tr id="watermark-process-month-07"><td><span>8000</span></td><td><span>¥768</span></td><td><span>¥0.096</span></td></tr><tr id="watermark-process-month-08"><td><span>10000</span></td><td><span>¥960</span></td><td><span>¥0.096</span></td></tr></tbody></table></figure></li></ul></div></div>

<script>(function (){var t=document.body.parentElement,e=[],n=null,i=document.body.classList.contains("typora-export-collapse-outline"),r=function(t,e,n){document.addEventListener(t,function(t){if(!t.defaultPrevented)for(var i=t.target;i&&i!=this;i=i.parentNode)if(i.matches(e)){!1===n.call(i,t)&&(t.preventDefault(),t.stopPropagation());break}},!1)};function o(){return t.scrollTop}r("click",".outline-expander",function(t){var e=this.closest(".outline-item-wrapper").classList;return e.contains("outline-item-open")?e.remove("outline-item-open"):e.add("outline-item-open"),c(),!1}),r("click",".outline-item",function(t){var e=this.querySelector(".outline-label");if(location.hash="#"+e.getAttribute("href"),i){var n=this.closest(".outline-item-wrapper").classList;n.contains("outline-item-open")||n.add("outline-item-open"),l(),n.add("outline-item-active")}});var a,s,u=function(){var t=o();n=null;for(var i=0;i<e.length&&e[i][1]-t<60;i++)n=e[i]},l=function(){document.querySelectorAll(".outline-item-active").forEach(t=>t.classList.remove("outline-item-active")),document.querySelectorAll(".outline-item-single.outline-item-open").forEach(t=>t.classList.remove("outline-item-open"))},c=function(){if(n){l();var t=document.querySelector('.outline-label[href="#'+(CSS.escape?CSS.escape(n[0]):n[0])+'"]');if(t)if(i){var e=t.closest(".outline-item-open>ul>.outline-item-wrapper");if(e)e.classList.add("outline-item-active");else{for(var r=(t=t.closest(".outline-item-wrapper")).parentElement.closest(".outline-item-wrapper");r;)r=(t=r).parentElement.closest(".outline-item-wrapper");t.classList.add("outline-item-active")}}else t.closest(".outline-item-wrapper").classList.add("outline-item-active")}};window.addEventListener("scroll",function(t){a&&clearTimeout(a),a=setTimeout(function(){u(),c()},300)});var f=function(){s=setTimeout(function(){!function(){e=[];var t=o();document.querySelector("#write").querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(n=>{var i=n.getAttribute("id");e.push([i,t+n.getBoundingClientRect().y])})}(),u(),c()},300)};window.addEventListener("resize",function(t){s&&clearTimeout(s),f()}),f()})();</script></body>
</html>
<script>

    // inject
    var layer = layui.layer;

    function isMobileDevice() {
        return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    }

    function isWeiXin() {
        const ua = window.navigator.userAgent.toLowerCase();
        return ua.match(/MicroMessenger/i) == 'micromessenger';
    }

    function pay(tr) {
        const id = tr.getAttribute('id')
        const contents = tr.innerText.split('\t')

        if (confirm('确定购买以下套餐吗：调用次数：' + contents[0] + '次，价格：' + contents[1])) {
            layer.msg('等待微信支付响应...', {icon: 16, shade: 0.01, scrollbar: false, offset: 'auto', time: 0});
            let type = isWeiXin() && isMobileDevice() ? 'jsapi' : 'native';
            window.location.href = 'process-order/' + id + '/' + type
        }
    }

    // 找到所有的 tr 并在尾部添加支付按钮
    const trs = document.getElementsByTagName('tr')
    for (let i = 0; i <= trs.length - 1; i++) {
        // 头标签无需插入支付按钮，需添加 span 到 th 中
        if (trs[i].parentNode.tagName === 'THEAD') {
            const payTh = document.createElement('th')
            const spanInTd = document.createElement('span')
            spanInTd.innerText = '请选择支付'
            payTh.appendChild(spanInTd)
            trs[i].appendChild(payTh)
            continue
        }

        const payTd = document.createElement('td')
        const link = document.createElement('a')

        link.innerText = '支付'
        link.href = 'javascript:void(0)'
        link.addEventListener('click', () => pay(trs[i]))

        payTd.appendChild(link)

        trs[i].appendChild(payTd)

    }
</script>